#:import utils kivy.utils
#:include gui/elements.kv



#our main screen
<HomeScreen>:
    name: "Home"
    on_enter: root.customize(root.manager.get_screen("Login").ids.username.text)

    BoxLayout:
        id: box
        orientation: "vertical"
        size: root.width, root.height
        MDToolbar:
            id: toolbar
            title: "Welcome"
            md_bg_color: utils.get_color_from_hex("#86b2d2")
            right_action_items: [["account", lambda x: account_info.set_state("open")]]

        MDBottomNavigation:

            MDBottomNavigationItem:
                name: "Recipe Screen"
                icon: "bowl-mix"

                MDBoxLayout:
                    id: recipie_card
                    size_hint: None,None
                    size: 300,400
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#b8ebda")
                        RoundedRectangle:
                            radius: [15]
                            size: self.size
                            pos: self.pos
                    FloatLayout:
                        ElementCard:
                            pos_hint: {"center_x":0.5,"center_y":0.84}
                            size: 280,110
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#ffd1df")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos

                            SearchElement:
                                pos_hint: {"center_x":0.5,"center_y":0.3}
                                MDIconButton:
                                    pos_hint: {"center_x":0.5,"center_y":0.5}
                                    icon: "magnify"
                                    on_release: app.root.current = "SearchRecipies"
                                MDTextButton:
                                    markup: True
                                    text: "[size=10sp][i]Feeling spicy?[/i][/size]\nMake a recipe!"
                                    pos_hint: {"center_x":0.5,"center_y":0.5}
                                    on_press: app.root.current = "SearchRecipies"
                            Image:
                                source: "Images/recp_1.png"
                                pos_hint:{"center_x":0.5,"center_y":0.78}
                            Image:
                                source: "Images/fork_1.png"
                                pos_hint:{"center_x":0.9,"center_y":0.68}
                            Image:
                                source: "Images/fork_2.png"
                                pos_hint:{"center_x":0.1,"center_y":0.68}
                        ElementCard:
                            id: notifs
                            pos_hint: {"center_x":0.7,"center_y":0.43}
                            size: 150,180
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#e7ee98")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            Image:
                                source: "Images/notif.png"
                                pos_hint: {"center_x":.5,"center_y":0.66}
                            MDRaisedButton:
                                md_bg_color: utils.get_color_from_hex("#3DC3FF")
                                markup: True
                                text: "[b][size=12sp]set reminders\nfor meal time[/size][/b]"
                                halign:"center"
                                pos_hint: {"center_x":.5,"center_y":0.18}
                                on_press: app.root.current = "notify"


                        ElementCard:
                            id: notes
                            pos_hint: {"center_x":0.23,"center_y":0.35}
                            size: 110,250
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#e1c4f5")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            Image:
                                source: "Images/note.png"
                                pos_hint: {"center_x":.5,"center_y":0.8}
                            Image:
                                source: "Images/note_2.jpg"
                                pos_hint: {"center_x":.5,"center_y":0.4}
                            MDRaisedButton:
                                text: "Your Notes"
                                on_release: app.root.current = "Notes"
                                pos_hint: {"center_x":.5,"center_y":0.14}
                                md_bg_color: utils.get_color_from_hex("#d0aed7")
                        Image:
                            pos_hint: {"center_x":0.7,"center_y":0.11}
                            source: "Images/recipe_log.png"

            MDBottomNavigationItem:
                name: "Main Screen"
                icon: "home"

                BoxLayout:
                    id: home
                    size_hint: None,None
                    size: 300,400
                    orientation: "vertical"
                    padding:10
                    spacing: 10
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#d7c6cf")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos
                    FloatLayout:
                        ElementCard:
                            pos_hint: {"center_x":0.5,"center_y":0.84}
                            size: 280,110
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#ffd1df")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            MDFillRoundFlatButton:
                                text: "Your\nCommunity"
                                halign: "center"
                                text_align:'center'
                                pos_hint: {"center_x":0.24,"center_y":0.5}
                                on_press: app.root.current = "chat"
                                md_bg_color: utils.get_color_from_hex("#bcc8e5")
                            Image:
                                pos_hint: {"center_x":0.7,"center_y":0.5}
                                source: "Images/chat_4.png"

                        ElementCard:
                            pos_hint: {"center_x":0.5,"center_y":0.5}
                            size: 280,110
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#dcedc1")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            MDFillRoundFlatButton:
                                text: "Understanding\nThe Journey"
                                md_bg_color: utils.get_color_from_hex("#c6e299")
                                pos_hint: {"center_x":0.24,"center_y":0.5}
                                on_press: root.info()
                            Image:
                                pos_hint: {"center_x":0.7,"center_y":0.5}
                                source: "Images/book.png"


                        ElementCard:
                            pos_hint: {"center_x":0.5,"center_y":0.17}
                            size: 280,110
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#eec1ad")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            MDFillRoundFlatButton:
                                text: "Creating Your\nGoals"
                                valign: "center"
                                md_bg_color: utils.get_color_from_hex("#eab198")
                                pos_hint: {"center_x":0.24,"center_y":0.5}
                                on_press: app.root.current = "goals"
                            Image:
                                pos_hint: {"center_x":0.73,"center_y":0.5}
                                source: "Images/goal.png"


            MDBottomNavigationItem:
                name: "Data Screen"
                icon: "chart-bar"
                id: screen

                FloatLayout:
                    BoxLayout:
                        id: create_graph
                        size_hint: None,None
                        size: 300,400
                        orientation: "vertical"
                        padding:10
                        spacing: 3
                        pos_hint: {"center_x":0.5,"center_y":0.5}
                        canvas.before:
                            Color:
                                rgba: utils.get_color_from_hex("#eeeeee")
                            RoundedRectangle:
                                radius: [10]
                                size: self.size
                                pos: self.pos
                    FloatLayout:
                        id: flat
                        pos_hint:{"center_x":.5,"center_y":.5}


    MDNavigationDrawer:
        id: account_info
        BoxLayout:
            orientation:"vertical"
            Image:
                source: "Images/logo.png"
                size: self.texture_size
            ScrollView:
                MDList:
                    OneLineIconListItem:
                        text: "logout"
                        on_release: app.root.current = "Login"
                        IconLeftWidget:
                            icon:"logout"

                    OneLineIconListItem:
                        text: "give feedback"
                        on_release: app.root.current = "feedback"
                        IconLeftWidget:
                            icon:"bee-flower"
