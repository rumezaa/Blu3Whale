#:import utils kivy.utils

TabManager:
    SignUpScreen:
    LoginScreen:
    ForgotScreen:
    HomeScreen:
    Search:
    Note:
    Notify:

<Categories>
    on_release: root.set_check(check)

    CheckboxLeftWidget:
        id: check
        group: "check"



#for decorating
<ElementCard@FloatLayout>:

    size_hint: None,None
    padding: 10
    spacing: 10
<SearchElement@GridLayout>
    cols: 2
    size_hint: None,None
    size: 200,50

    spacing: 10
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex("#ffffff")
        RoundedRectangle:
            radius: [40]
            size: self.size
            pos: self.pos



<HomeScreen>:
    name: "Home"
    on_enter: root.customize(root.manager.get_screen("Login").ids.username.text)

    BoxLayout:
        id: box
        orientation: "vertical"
        size: root.width, root.height
        MDToolbar:
            title: "Welcome"
            md_bg_color: utils.get_color_from_hex("#86b2d2")
            right_action_items: [["account", lambda x: account_info.set_state("open")]]

        MDBottomNavigation:

            MDBottomNavigationItem:
                name: "Recipe Screen"
                icon: "bowl-mix"

                MDBoxLayout:
                    id: recipie_card

                    size_hint: None,None
                    size: 300,400
#                    padding:10
#                    spacing: 3
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#b8ebda")
                        RoundedRectangle:
                            radius: [15]
                            size: self.size
                            pos: self.pos
                    FloatLayout:
                        ElementCard:
                            pos_hint: {"center_x":0.5,"center_y":0.84}
                            size: 280,110
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#ffd1df")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            SearchElement:
                                pos_hint: {"center_x":0.5,"center_y":0.3}
                                MDIconButton:
                                    pos_hint: {"center_x":0.5,"center_y":0.5}
                                    icon: "magnify"
                                    on_release: app.root.current = "SearchRecipies"
                                MDLabel:
                                    markup: True
                                    text: "[size=10sp][i]Feeling spicy?[/i][/size]\nMake a recipe!"
                                    pos_hint: {"center_x":0.5,"center_y":0.5}

                        ElementCard:
                            id: notifs
                            pos_hint: {"center_x":0.7,"center_y":0.43}
                            size: 150,180
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#e7ee98")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            Image:
                                source: "Images/notif.png"
                                pos_hint: {"center_x":.5,"center_y":0.66}
                            MDRaisedButton:
                                markup: True
                                text: "[b][size=12sp]set reminders\nfor meal time[/size][/b]"
                                halign:"center"
                                pos_hint: {"center_x":.5,"center_y":0.18}
                                on_press: app.root.current = "notify"



                        ElementCard:
                            id: ?
                            pos_hint: {"center_x":0.23,"center_y":0.35}
                            size: 110,250
                            canvas.before:
                                Color:
                                    rgba: utils.get_color_from_hex("#e1c4f5")
                                RoundedRectangle:
                                    radius: [30]
                                    size: self.size
                                    pos: self.pos
                            Image:
                                source: "Images/note.png"
                                pos_hint: {"center_x":.5,"center_y":0.8}
                            Image:
                                source: "Images/note_2.jpg"
                                pos_hint: {"center_x":.5,"center_y":0.4}
                            MDRaisedButton:
                                on_release: app.root.current = "Notes"
                                pos_hint: {"center_x":.5,"center_y":0.14}
                        ElementCard:

            MDBottomNavigationItem:
                name: "Main Screen"
                icon: "home"

                BoxLayout:
                    id: home
                    size_hint: None,None
                    size: 300,400
                    orientation: "vertical"
                    padding:10
                    spacing: 10
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#d9d2e9")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos




            MDBottomNavigationItem:
                name: "Data Screen"
                icon: "chart-bar"

                BoxLayout:
                    id: create_graph
                    size_hint: None,None
                    size: 300,400
                    orientation: "vertical"
                    padding:10
                    spacing: 10
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#eeeeee")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos

    MDNavigationDrawer:
        id: account_info
        BoxLayout:
            orientation:"vertical"
            Image:
                source: "Images/logo.png"
                size: self.texture_size
            ScrollView:
                MDList:

                    OneLineIconListItem:
                        text: "settings"
                        IconLeftWidget:
                            icon:"cog"

                    OneLineIconListItem:
                        text: "logout"
                        on_release: app.root.current = "Login"
                        IconLeftWidget:
                            icon:"logout"
<Notify>:
    name: "notify"
    BoxLayout:
        orientation: "vertical"
    MDToolbar:
        left_action_items: [["arrow-left", lambda x: app.set_screen('Home') ]]
        md_bg_color: utils.get_color_from_hex("#F1F5C4")

    BoxLayout:
        orientation: "vertical"
        MDTextField:
            id: time_set
            hint_text: "Enter the amount of times you would like to be reminded"

        MDTextField:
            id: int_set
            hint_text: "Enter the amount of times you would like to be reminded"

        MDRaisedButton:
            on_press: root.choose_time()

#recipe search screen
<Search>:
    name: "SearchRecipies"
    BoxLayout:
        orientation: "vertical"
        MDToolbar:

            left_action_items: [["arrow-left", lambda x: app.set_screen('Home') ]]
            md_bg_color: utils.get_color_from_hex("#F1F5C4")

        MDBottomNavigation:

            MDBottomNavigationItem:
                name: "recipe_search"
                icon: "magnify"
                BoxLayout:
                    orientation: "vertical"
                    spacing: 20
                    padding: 20
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#F5E1C4")
                        Rectangle:
                            pos: self.pos
                            size: self.size
                    MDTextField:
                        id: search_input

                        mode: "rectangle"
                        line_color_focus: 0, 0, 0, 0.8
                        pos_hint:{"center_x":0.5}
                        hint_text: 'search a food'
                        hint_text_color: 0, 0, 0, 0.8
                        icon_right: 'magnify'
                        icon_right_color_normal: 0, 0, 0, 0.8
                        size_hint_x: None
                        width: 150
                        font_size: 16

                        multiline: False
                        on_text_validate: root.get_search()
                    ScrollView:
                        id: scrollview
                        Recipe:
                            id: recipe_view
                            cols: 1
                            row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols
                            row_force_default: True
                            adaptive_height: True
                            padding: dp(4), dp(4)
                            spacing: dp(20)

            MDBottomNavigationItem:
                name: "info"
                icon: "calender-blank"
<Note>
    name: "Notes"
    on_enter: root.load_notes(root.manager.get_screen("Login").ids.username.text)
    BoxLayout:
        orientation: "vertical"
        MDToolbar:

            left_action_items: [["arrow-left", lambda x: app.set_screen('Home') ]]


            md_bg_color: utils.get_color_from_hex("#F1F5C4")

        FloatLayout:
            ScrollView:
                id: scrollview
                TextInput:
                    id: user_text
                    font_size: '25sp'
                    size_hint: 1, None
                    background_color: utils.get_color_from_hex(	"#f1f5c4")
                    height: max( (len(self._lines)+1) * self.line_height, scrollview.height)
            MDFloatingActionButton:
                icon: "android"
                md_bg_color: utils.get_color_from_hex("eeeeee")
                on_press: root.add_notes(root.manager.get_screen("Login").ids.username.text)
                pos_hint:
#signup screen
<SignUpScreen>:
    name: "SignUp"
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex("#FFFFFF")
        Rectangle:
            pos: self.pos
            size: self.size



    FloatLayout:
        spacing: 10
        padding: 40
        pos_hint: {"center_x": 0.5}
        MDFloatLayout:
            pos_hint: {"center_x": 0.4,"center_y": 0.8}
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex("#d1e2fa")
                Ellipse:
                    size:self.size
                    pos: self.pos


        Image:
            source: "Images/brand_name.png"
            pos_hint: {"center_x": 0.4,"center_y": 0.8}

        MDLabel:
            markup: True
            font_name: "Dubai-bold"
            text: "[b][size=20]START YOUR JOURNEY[/size][/b]"
            theme_text_color: "Custom"
            text_color: utils.get_color_from_hex("#eeeeee")
            pos_hint: {"center_x": 0.55,"center_y": 0.7}

        MDTextField:
            id: add_email
            hint_text: "email"
            icon_right: "email"
            required: True
            helper_text_mode: "on_error"
            size_hint_x: None

            width: 300
            height: 10
            pos_hint: {"center_x": 0.5,"center_y": 0.5}

        MDTextField:
            id: add_username
            required: True
            helper_text_mode: "on_error"
            max_length: 9
            hint_text: "username"
            icon_right: "account"
            size_hint_x: None
            width: 300
            pos_hint: {"center_x": 0.5,"center_y": 0.4}

        MDTextField:
            id: add_user_password
            required: True
            helper_text_mode: "on_error"
            hint_text: "password"
            icon_right: "eye-off"
            icon_color: 1,1,1,1
            size_hint_x: None
            width: 300
            password: True
            pos_hint: {"center_x": 0.5,"center_y": 0.3}


        MDRaisedButton:
            id: loggedIn
            markup: True
            text: "[b]Sign Up[/b]"
            pos_hint: {"center_x": 0.5,"center_y": 0.2}
            md_bg_color: utils.get_color_from_hex("#d9d2e9")
            on_press: root.signUp()
            md_bg_color:  utils.get_color_from_hex("#d1e2fa")


        MDRaisedButton:
            id: loggedIn
            markup: True
            text: "[b]I have an Account[/b]"
            pos_hint: {"center_x": 0.5,"center_y": 0.1}
            on_press: app.root.current="Login"
            md_bg_color:  utils.get_color_from_hex("#d1e2fa")




#loginscreen
<LoginScreen>:
    name: "Login"
    FloatLayout:
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_x": 0.06,"center_y": 0.95}
            on_press: app.root.current = "SignUp"

        MDLabel:
            text: "Register"
            pos_hint: {"center_x": 0.6,"center_y": 0.95}
        MDBoxLayout:
            size_hint: None,None
            size: 300,400
            orientation: "vertical"
            spacing: 10
            pos_hint: {"center_x":0.5,"center_y":0.5}
            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex("#d1e2fa")
                RoundedRectangle:
                    radius: [30]
                    size: self.size
                    pos: self.pos
            Image:
                source: "Images/login_logo.png"
                pos_hint: {"center_x":0.47,"center_y":0.5}

            MDTextField:
                id: username
                hint_text: "username"
                icon_right: "account"
                size_hint_x: None
                width: 210
                pos_hint: {"center_x": 0.5}

            MDTextField:
                id: user_password
                hint_text: "password"
                icon_right: "eye-off"
                size_hint_x: None
                width: 210
                password: True
                pos_hint: {"center_x": 0.5}


            MDFillRoundFlatButton:
                id: loggedIn
                markup: True
                text: "[color=#d1e2fa][b]login[/b][/color]"
                md_bg_color: utils.get_color_from_hex("#eeeeee")
                pos_hint: {"center_x": 0.5}
                on_press: root.login()


            MDTextButton:
                id: forgot_pass
                markup: True
                text: "[color=#000b80][size=12sp]Forgot password?[/size][/color]"
                pos_hint: {"center_x": 0.5}
                on_press: app.root.current="Forgot"

            Widget:
                size_hint: None,None
                size: 10,20


#forgot password
<ForgotScreen>:
    name: "Forgot"
    FloatLayout:
        MDIconButton:
            icon: "arrow-left"
            pos_hint: {"center_x": 0.06,"center_y": 0.95}
            on_press: app.root.current = "Login"

        MDLabel:
            text: "Login"
            pos_hint: {"center_x": 0.6,"center_y": 0.95}
        MDBoxLayout:
            size_hint: None,None
            size: 300,400
            orientation: "vertical"
            padding:10
            spacing: 10
            pos_hint: {"center_x":0.5,"center_y":0.5}

            canvas.before:
                Color:
                    rgba: utils.get_color_from_hex("#d1e2fa")
                RoundedRectangle:
                    radius: [30]
                    size: self.size
                    pos: self.pos
            Image:
                source: "Images/forgot_logo.png"


            MDTextField:
                id: _username
                hint_text: "username"
                icon_right: "account"
                size_hint_x: None
                width: 210
                pos_hint: {"center_x": 0.5}

            MDTextField:
                id: new_password
                hint_text: "new password"
                icon_right: "eye-off"
                size_hint_x: None
                width: 210
                password: True
                pos_hint: {"center_x": 0.5}

            MDFillRoundFlatButton:
                id: loggedIn
                markup: True
                text: "[color=#d1e2fa][b]login[/b][/color]"
                pos_hint: {"center_x": 0.5}
                md_bg_color: utils.get_color_from_hex("#eeeeee")
                on_press: root.forgot_pass()



            Widget:
                size_hint: None,None
                size: 10,40








