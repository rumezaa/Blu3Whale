#:import utils kivy.utils

TabManager:
    SignUpScreen:
    LoginScreen:
    ForgotScreen:
    HomeScreen:
    Search:

<Categories>
    on_release: root.set_check(check)

    CheckboxLeftWidget:
        id: check
        group: "check"



#for decorating
<ElementCard@BoxLayout>:
    orientation:"vertical"
    size_hint: None,None
    size: 100,160
    padding:30
    spacing: 30
#    pos_hint: {"center_x":0.5,"center_y":0.5}
    canvas.before:
        Color:
            rgba: utils.get_color_from_hex("#eaccff")
        RoundedRectangle:
            radius: [10]
            size: self.size
            pos: self.pos




<HomeScreen>:
    name: "Home"
    on_enter: root.customize(root.manager.get_screen("Login").ids.username.text)

    BoxLayout:
        id: box
        orientation: "vertical"
        size: root.width, root.height
        MDToolbar:
            title: "Welcome"
            right_action_items: [["account", lambda x: account_info.set_state("open")]]

        MDBottomNavigation:

            MDBottomNavigationItem:
                name: "Recipe Screen"
                icon: "bowl-mix"

                MDCard:
                    id: recipie_card

                    size_hint: None,None
                    size: 300,400
#                    padding:10
#                    spacing: 3
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#c6dcbe")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos
                    MDGridLayout:
                        halign: "center"
                        cols: 2
                        spacing: 30
                        padding: 30
                        ElementCard:
                            MDFillRoundFlatIconButton:
                                on_press: app.root.current = "SearchRecipies"
                                pos_hint: {"center_x":0.5,"center_y":0.5}
                        ElementCard:
                        ElementCard:
                        ElementCard:

            MDBottomNavigationItem:
                name: "Main Screen"
                icon: "home"

                BoxLayout:
                    id: home
                    size_hint: None,None
                    size: 300,400
                    orientation: "vertical"
                    padding:10
                    spacing: 10
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#d9d2e9")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos




            MDBottomNavigationItem:
                name: "Data Screen"
                icon: "chart-bar"

                BoxLayout:
                    id: create_graph
                    size_hint: None,None
                    size: 300,400
                    orientation: "vertical"
                    padding:10
                    spacing: 10
                    pos_hint: {"center_x":0.5,"center_y":0.5}
                    canvas.before:
                        Color:
                            rgba: utils.get_color_from_hex("#eeeeee")
                        RoundedRectangle:
                            radius: [10]
                            size: self.size
                            pos: self.pos

    MDNavigationDrawer:
        id: account_info
        BoxLayout:
            orientation:"vertical"
            Image:
                source: "Images/logo.png"
                size: self.texture_size
            ScrollView:
                MDList:

                    OneLineIconListItem:
                        text: "settings"
                        IconLeftWidget:
                            icon:"cog"

                    OneLineIconListItem:
                        text: "logout"
                        on_release: app.root.current = "Login"
                        IconLeftWidget:
                            icon:"logout"



#recipe search screen
<Search>:
    name: "SearchRecipies"
    BoxLayout:
        orientation: "vertical"
        size: root.width, root.height
        spacing: 20
        MDToolbar:
            left_action_items: [["arrow-left", lambda x: app.set_screen('Home') ]]
        MDBottomNavigation:

            MDBottomNavigationItem:
                name: "recipe_search"
                icon: "magnify"
                BoxLayout:
                    orientation: "vertical"
                    spacing: 20
                    padding: 20
                    MDTextFieldRound:
                        id: search_input
                        height: 50
                        pos_hint:{"center_x":0.5}
                        hint_text: 'search a food'
                        hint_text_color: 1,1,1,1
                        icon_left: 'magnify'
                        helper_text: "Search"
                        size_hint_x: None
                        width: 150
                        font_size: 16
                        active_line: False
                        multiline: False
                        on_text_validate: root.get_search()
                    ScrollView:
                        Recipe:
                            id: recipe_view
                            cols: 1
                            row_default_height: (self.width - self.cols*self.spacing[0]) / self.cols
                            row_force_default: True
                            adaptive_height: True
                            padding: dp(4), dp(4)
                            spacing: dp(20)
            MDBottomNavigationItem:
                name: "info"
                icon: "calender-blank"


#signup screen
<SignUpScreen>:
    name: "SignUp"
    MDCard:
        size_hint: None,None
        size: 300,400
        orientation: "vertical"
        padding:10
        spacing: 10
        pos_hint: {"center_x":0.5,"center_y":0.5}
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex("#d9d2e9")
            RoundedRectangle:
                radius: [10]
                size: self.size
                pos: self.pos

        MDIcon:
            icon: "account"
            halign: "center"
            font_size: 220

        MDTextFieldRound:
            id: add_email
            hint_text: "email"
            icon_right: "email"
            size_hint_x: None
            width: 210
            pos_hint: {"center_x": 0.5}

        MDTextFieldRound:
            id: add_username
            hint_text: "username"
            icon_right: "account"
            size_hint_x: None
            width: 210
            pos_hint: {"center_x": 0.5}

        MDTextFieldRound:
            id: add_user_password
            hint_text: "password"
            icon_right: "eye-off"
            icon_color: 1,1,1,1
            size_hint_x: None
            width: 210
            password: True
            pos_hint: {"center_x": 0.5}

        MDFillRoundFlatButton:
            id: loggedIn
            text: "Sign Up"
            pos_hint: {"center_x": 0.5}
            on_press: root.signUp()



        MDFillRoundFlatButton:
            id: loggedIn
            text: "I have an Account"
            pos_hint: {"center_x": 0.5}
            on_press: app.root.current="Login"





#loginscreen
<LoginScreen>:
    name: "Login"
    MDCard:
        size_hint: None,None
        size: 300,400
        orientation: "vertical"
        spacing: 5
        pos_hint: {"center_x":0.5,"center_y":0.5}
        canvas.before:
            Color:
                rgba: utils.get_color_from_hex("#d9d2e9")
            RoundedRectangle:
                radius: [10]
                size: self.size
                pos: self.pos



        MDBoxLayout:
            orientation: "vertical"
            padding:2
            spacing: 10
            pos_hint: {"center_x":0.5,"center_y":0.5}
            MDIcon:
                icon: "account"
                halign: "center"
                font_size: 220
                theme_icon_color: "Custom"
                icon_color: 1, 0, 0, 1
            MDTextFieldRound:
                id: username
                hint_text: "username"
                icon_right: "account"
                size_hint_x: None
                width: 210
                pos_hint: {"center_x": 0.5}

            MDTextFieldRound:
                id: user_password
                hint_text: "password"
                icon_right: "eye-off"
                size_hint_x: None
                width: 210
                password: True
                pos_hint: {"center_x": 0.5}


            MDFillRoundFlatButton:
                id: loggedIn
                text: "login"
                pos_hint: {"center_x": 0.5}
                on_press: root.login()


            MDTextButton:
                id: forgot_pass
                text: "FORGOT PASSWORD"
                font_size: "12"
                custom_color: 0,1,0,1
                pos_hint: {"center_x": 0.5}
                on_press: app.root.current="Forgot"

            MDTextButton:
                id: new_account
                text: "NEW ACCOUNT"
                font_size: "12"
                pos_hint: {"center_x": 0.5}
                on_press: app.root.current="SignUp"
            Widget:
                size_hint: None,None
                size: 10,20


#forgot password
<ForgotScreen>:
    name: "Forgot"

    MDCard:
        size_hint: None,None
        size: 300,400
        orientation: "vertical"
        padding:10
        spacing: 10
        pos_hint: {"center_x":0.5,"center_y":0.5}

        canvas.before:
            Color:
                rgba: utils.get_color_from_hex("#d9d2e9")
            RoundedRectangle:
                radius: [10]
                size: self.size
                pos: self.pos

        MDIcon:
            icon: "account"
            halign: "center"
            font_size: 220

        MDTextFieldRound:
            id: _username
            hint_text: "username"
            icon_right: "account"
            size_hint_x: None
            width: 210
            pos_hint: {"center_x": 0.5}

        MDTextFieldRound:
            id: new_password
            hint_text: "new password"
            icon_right: "eye-off"
            size_hint_x: None
            width: 210
            password: True
            pos_hint: {"center_x": 0.5}

        MDFillRoundFlatButton:
            id: loggedIn
            text: "Change password"
            pos_hint: {"center_x": 0.5}
            on_press: root.forgot_pass()

        Widget:
            size_hint: None,None
            size: 10,40








